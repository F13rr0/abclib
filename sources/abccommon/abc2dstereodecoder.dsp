//--------------------------------------------------------------------------------------//
//----------------------------------------abclib----------------------------------------//
//
//-------------------------------FAUST CODE FOR MIXED MUSIC-----------------------------//
//
//-------------------------------- BY ALAIN BONARDI - 2019 -----------------------------//
//--------------------------------------------------------------------------------------//

//COMMON FAUST CODE FOR 2D DECODERS//

import("../abccommon/abcgainline.dsp");

//--------------------------------------------------------------------------------------//
//CONTROL PARAMETERS: POSITIONS OF THE LOUDSPEAKERS IN DEGREES (anticlockwise)
//--------------------------------------------------------------------------------------//
gain = hslider("v:stereodecoder/gain [unit:dB]", 0, -127, 18, 0.01) : dbtogain;
direct = 2 * checkbox("v:stereodecoder/directangles") - 1; 
//--------------------------------------------------------------------------------------//
//A VECTOR OF GAINS ON THE OUTPUT
//--------------------------------------------------------------------------------------//
leftDispatcher = _<:(*(1-direct), *(direct));
rightDispatcher = _<:(*(direct), *(1-direct));

//--------------------------------------------------------------------------------------//
//AMBISONIC DECODING WITH IRREGULAR ORDER
//-------------------------------------------------------------------
mystereodecoder(n)	= ho.decoderStereo(n) : gainLine(2) : (leftDispatcher, rightDispatcher) :> (_, _);