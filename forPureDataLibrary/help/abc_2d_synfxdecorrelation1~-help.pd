#N canvas 508 105 1851 735 10;
#X obj 10 -13 cnv 15 500 25 empty empty abc_2d_syn_decorrelationN~Â &_fx 20 12 0 18 #606060 #fcfcfc 0;
#X obj 8 670 abc_helpcredit;
#X obj 10 13 cnv 15 500 25 empty empty Decorrelation_processes_to_generate_or_process_spatial_components 20 12 0 12 #606060 #fcfcfc 0;
#X obj 1054 624 tgl 15 0 empty empty DSP_on/off 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 1054 652 \; pd dsp \$1 \;;
#X text 943 -24 CONTROLS;
#X text 546 -26 DESCRIPTION;
#X obj 106 371 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 106 397 stereo \$1;
#X obj 1664 176 abc_upanddown;
#X obj 640 240 abc_soundgrain~;
#X obj 534 376 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 534 396 stereo \$1;
#X obj 449 178 abc_gain -127;
#X msg 1140 277 freq \$1;
#X obj 1140 213 loadbang;
#X msg 1140 234 2;
#X floatatom 1140 255 5 0 0 0 - - - 0;
#X obj 1004 371 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 1004 391 stereo \$1;
#X obj 951 173 abc_gain -127;
#X msg 1664 221 factor \$1;
#X obj 509 464 abc_meter;
#X obj 953 483 abc_meter;
#X obj 112 273 r cmd;
#X obj 539 304 r cmd;
#X obj 1075 360 r cmd;
#X obj 1633 599 s cmd;
#X obj 1535 93 loadbang;
#X msg 1503 157 0;
#X obj 1503 184 vradio 15 1 0 22 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0;
#X msg 1533 157 0;
#X floatatom 1533 184 5 0 1 0 - - - 0;
#X msg 1503 524 functiontype \$1;
#X msg 1533 219 fdbk \$1;
#X text 1451 229 log(1+x);
#X text 1488 187 x;
#X text 1476 199 x^2;
#X text 1476 215 sin;
#X text 1454 245 sqrt(x);
#X text 1418 260 1-cos(Pi/2*x);
#X text 1406 275 (1-cos(Pi*x))/2;
#X text 1441 290 1-(1-x)^2;
#X text 1429 304 composite 1;
#X text 1477 319 x^3;
#X text 1441 334 1-(1-x)^3;
#X text 1429 348 composite 2;
#X text 1477 363 x^4;
#X text 1441 378 1-(1-x)^4;
#X text 1429 393 composite 3;
#X text 1429 438 composite 4;
#X text 1477 408 x^5;
#X text 1441 423 1-(1-x)^5;
#X text 1429 468 composite 5;
#X text 1429 453 2^(10(x-1));
#X text 1417 485 1-sqrt(1-x^2);
#X text 1405 500 sqrt(1-(x-1)^2);
#X obj 110 208 abc_env_noise 125 0.25 0;
#X obj 1040 169 abc_env_noise 90 0.3 0;
#X obj 4 377 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 4 397 directangles \$1;
#X obj 432 374 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 432 396 directangles \$1;
#X obj 900 370 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 900 392 directangles \$1;
#X msg 1595 137 96000;
#X floatatom 1595 184 5 0 1 0 - - - 0;
#X msg 1595 221 delay \$1;
#X text 547 -6 abc_2d_syn_decorrelation1~ \, abc_2d_syn_decorrelation2~ \, ... objects generate spatial decorrelated components in ambisonic from one mono signal. abc_2d_fx_decorrelated1~ \, abc_2d_fx_decorrelated2~ \, ... objects apply decorrelation to spatial components already created by encoders or maps for instance. If we are at order N in ambisonics \, the number of spatial components is P = 2*N+1. Each spatial component is delayed and the P delay lines are driven by a 'factor' parameter between 0 and 1 The ith (i between 0 and P-1) delay is either 0 or (i+1)*delay/P. The factor parameter is compared to 1-(i+1)/P. If it is greater than this threshold the delay is (i+1)*delay/P \, else the delay is 0;
#X text 943 -3 delay is the maximum duration in samples of the delays (by default it is 48000 \, minimum is 10 maximum 262144 \, that is roughly 5 \, 46 sec at 48KHz);
#X obj 1664 137 tgl 25 1 empty empty empty 17 7 0 10 #feffc6 #000000 #000000 0 1;
#X msg 537 245 angle \$1;
#X floatatom 537 224 5 -360 360 0 - - - 0;
#X text 942 37 factor (between 0 and 1) is a control parameter that 'opens' the delay lines when increasing;
#X text 942 74 functiontype (between 0 and 21) set the distribution used to spread delay time between the spatial components;
#X text 941 109 fdbk set the amount of feedback of each delay line;
#X obj 19 172 abc_gain -127;
#X obj 112 300 abc_2d_syn_decorrelation1_m, f 32;
#X obj 107 421 abc_2d_decoder1_m, f 33;
#X obj 154 464 abc_quadriout_m -15 1 2 3 4;
#X obj 51 464 abc_meter4_m;
#X obj 538 269 abc_2d_encoder1_m, f 32;
#X obj 539 330 abc_2d_fx_decorrelation1_m, f 32;
#X obj 766 423 abc_2d_scope1_m;
#X obj 534 423 abc_2d_decoder1_m, f 33;
#X obj 585 461 abc_quadriout_m -15 1 2 3 4;
#X obj 1140 299 abc_2d_randomtrajectory_2map_m;
#X obj 1147 360 abc_2d_map7_m, f 14;
#X obj 1075 404 abc_2d_fx_decorrelation7_m;
#X obj 1018 455 abc_2d_decoder7_m;
#X obj 1029 524 dac~ 1;
#X obj 1228 456 abc_2d_scope7_m;
#X obj 1178 491 abc_ambi_scope_m;
#X obj 758 461 abc_ambi_scope_m;
#X connect 3 0 4 0;
#X connect 7 0 8 0;
#X connect 8 0 78 0;
#X connect 9 0 21 0;
#X connect 10 1 81 1;
#X connect 11 0 12 0;
#X connect 12 0 84 0;
#X connect 13 0 84 0;
#X connect 14 0 86 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 17 0 14 0;
#X connect 18 0 19 0;
#X connect 19 0 89 0;
#X connect 20 0 89 0;
#X connect 21 0 27 0;
#X connect 24 0 77 0;
#X connect 25 0 82 0;
#X connect 26 0 88 0;
#X connect 28 0 29 0;
#X connect 28 0 31 0;
#X connect 28 0 65 0;
#X connect 29 0 30 0;
#X connect 30 0 33 0;
#X connect 31 0 32 0;
#X connect 32 0 34 0;
#X connect 33 0 27 0;
#X connect 34 0 27 0;
#X connect 57 0 77 1;
#X connect 58 0 86 1;
#X connect 59 0 60 0;
#X connect 60 0 78 0;
#X connect 61 0 62 0;
#X connect 62 0 84 0;
#X connect 63 0 64 0;
#X connect 64 0 89 0;
#X connect 65 0 66 0;
#X connect 66 0 67 0;
#X connect 67 0 27 0;
#X connect 70 0 9 0;
#X connect 71 0 81 0;
#X connect 72 0 71 0;
#X connect 76 0 78 0;
#X connect 77 1 78 1;
#X connect 78 1 79 0;
#X connect 78 1 80 0;
#X connect 81 1 82 1;
#X connect 82 1 83 1;
#X connect 82 1 84 1;
#X connect 83 1 93 1;
#X connect 84 1 22 0;
#X connect 84 1 85 0;
#X connect 86 1 87 1;
#X connect 87 1 88 1;
#X connect 88 1 89 1;
#X connect 88 1 91 1;
#X connect 89 1 23 0;
#X connect 89 1 90 0;
#X connect 91 1 92 1;
#X coords 0 735 1 734 85 60 0;
