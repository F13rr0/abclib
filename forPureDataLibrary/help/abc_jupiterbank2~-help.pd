#N struct 1082-template-master float x float x2 float color float colort float xs float ys symbol sym;
#N canvas 632 390 1224 640 10;
#X obj 15 6 cnv 15 500 25 empty empty abc_jupiterbank2~Â  20 12 0 18 #606060 #fcfcfc 0;
#X obj 13 610 abc_helpcredit;
#X obj 14 32 cnv 15 500 25 empty empty A_2nd_synthetizer_inspired_by_Manoury's_Jupiter_bank_of_oscillators 20 12 0 12 #606060 #fcfcfc 0;
#X obj 64 374 tgl 15 0 empty empty DSP_on/off 17 7 0 10 #dfdfdf #000000 #000000 0 1;
#X msg 64 402 \; pd dsp \$1 \;;
#X text 836 230 CONTROLS;
#X text 834 13 DESCRIPTION;
#X obj 229 74 loadbang;
#X floatatom 139 138 5 0 0 0 - - - 0;
#X msg 139 167 k \$1;
#X floatatom 196 138 5 0 0 0 - - - 0;
#X msg 196 167 f0 \$1;
#X floatatom 258 138 5 0 0 0 - - - 0;
#X floatatom 312 138 5 0 0 0 - - - 0;
#X msg 258 167 resg \$1;
#X msg 312 167 resq \$1;
#X msg 258 117 10;
#X msg 312 117 60;
#X msg 196 117 220;
#X msg 139 117 1.004;
#N canvas 1687 256 321 298 factorAndOscFilterGeneration 0;
#X obj 54 30 osc~ 0.05;
#X obj 54 72 *~ 2;
#X obj 54 97 +~ 2.02;
#X obj 132 72 +~ 1;
#X obj 132 96 *~ 0.2;
#X obj 54 135 snapshot~;
#X obj 132 135 snapshot~;
#X obj 233 50 loadbang;
#X msg 233 71 1;
#X obj 233 95 metro 20;
#X obj 132 156 * -1;
#X obj 132 177 + 0.4;
#X obj 55 235 outlet;
#X obj 132 234 outlet;
#X connect 0 0 1 0;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 5 0 12 0;
#X connect 6 0 10 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 5 0;
#X connect 9 0 6 0;
#X connect 10 0 11 0;
#X connect 11 0 13 0;
#X restore 416 142 pd factorAndOscFilterGeneration;
#X floatatom 416 175 5 0 0 0 - - - 0;
#X msg 416 195 fa \$1;
#X floatatom 599 173 5 0 0 0 - - - 0;
#X msg 599 193 osc2filter \$1;
#X obj 397 312 abc_spectrogram;
#N canvas 150 175 495 311 spectrum 0;
#X msg 120 144 onoff \$1;
#X obj 120 121 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X floatatom 222 120 5 0 0 0 - - - 0;
#X obj 221 40 loadbang;
#X floatatom 327 120 5 0 0 0 - - - 0;
#X msg 120 100 1;
#X msg 222 143 fftsize \$1;
#X msg 222 97 1024;
#X msg 327 97 0;
#X msg 362 97 1;
#X msg 395 97 2;
#X msg 327 143 ampscale \$1;
#X text 45 54 Spectrogram controls;
#X obj 219 260 outlet;
#X connect 0 0 13 0;
#X connect 1 0 0 0;
#X connect 2 0 6 0;
#X connect 3 0 7 0;
#X connect 3 0 8 0;
#X connect 3 0 5 0;
#X connect 4 0 11 0;
#X connect 5 0 1 0;
#X connect 6 0 13 0;
#X connect 7 0 2 0;
#X connect 8 0 4 0;
#X connect 9 0 4 0;
#X connect 10 0 4 0;
#X connect 11 0 13 0;
#X restore 736 283 pd spectrum;
#X text 835 33 abc_jupiterbank2~ is inspired by the bank of 14 oscillators used by Philippe Manoury in Jupiter for flute and live electronics. It enables to generate spectra that can evoluate from harmonic to inharmonic content. Each partial has a separate output in the object. The 14 frequencies (i from 0 to 13) are given by the formula: f_i = (k+i)*f0 where k is a constant and f0 a kind of 'fundamental' frequency. The distance between the frequencies is always f0. When k is 1 \, the spectrem is harmonic and results in f0 \, 2*f0 \, ... \, 14*f0. When k is diffrent from integers \, the spectrum is inharmonic. We added to these 14 oscillators 14 resonant filters tuned at the same frequencies. Crossfading between oscillators and filters is controlled by osc2filter.;
#X text 838 249 - k is the constant that determines the harmonic/inharmonic behaviour of the generator - f0 is the 'fundamental' frequency of the generator - osc2filter provides a crossfade between the 14 oscillators and the 14 resonant filters (0 => oscillators \, 1 => filters) - resg is the gain of the filters - resq is the quality factor of the filters;
#X text 837 343 Compared to abc_jupiterbank~ synthesis \, this one adds the control of the amplitudes of the 14 oscillators thanks to a factor fa and to a transfer function that maps each frequency multiplied by fa to a level between 0 and 127;
#X obj 197 522 abc_stereoout -30;
#X text 835 183 The Faust implementation is largely inspired by Maxence Larrieu's article: https://hal.archives-ouvertes.fr/hal-02135597;
#X obj 47 77 abc_gain -127;
#X obj 177 253 abc_jupiterbank2~;
#X obj 189 432 abc_chopan14~;
#X connect 3 0 4 0;
#X connect 7 0 19 0;
#X connect 7 0 18 0;
#X connect 7 0 16 0;
#X connect 7 0 17 0;
#X connect 8 0 9 0;
#X connect 9 0 33 0;
#X connect 10 0 11 0;
#X connect 11 0 33 0;
#X connect 12 0 14 0;
#X connect 13 0 15 0;
#X connect 14 0 33 0;
#X connect 15 0 33 0;
#X connect 16 0 12 0;
#X connect 17 0 13 0;
#X connect 18 0 10 0;
#X connect 19 0 8 0;
#X connect 20 0 21 0;
#X connect 20 1 23 0;
#X connect 21 0 22 0;
#X connect 22 0 33 0;
#X connect 23 0 24 0;
#X connect 24 0 33 0;
#X connect 26 0 25 1;
#X connect 32 0 33 0;
#X connect 33 1 25 0;
#X connect 33 1 34 1;
#X connect 33 2 25 0;
#X connect 33 2 34 2;
#X connect 33 3 25 0;
#X connect 33 3 34 3;
#X connect 33 4 25 0;
#X connect 33 4 34 4;
#X connect 33 5 25 0;
#X connect 33 5 34 5;
#X connect 33 6 25 0;
#X connect 33 6 34 6;
#X connect 33 7 25 0;
#X connect 33 7 34 7;
#X connect 33 8 25 0;
#X connect 33 8 34 8;
#X connect 33 9 25 0;
#X connect 33 9 34 9;
#X connect 33 10 25 0;
#X connect 33 10 34 10;
#X connect 33 11 25 0;
#X connect 33 11 34 11;
#X connect 33 12 25 0;
#X connect 33 12 34 12;
#X connect 33 13 25 0;
#X connect 33 13 34 13;
#X connect 33 14 25 0;
#X connect 33 14 34 14;
#X connect 34 1 30 0;
#X connect 34 2 30 1;
